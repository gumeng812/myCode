<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style type="text/css">
  	html{
  		font-size: 18px;
  	}
  	#content{
  		width: 100%;
  		height: 88px;
  	}
  	.btn{
  		width: 100%;
  		height: 44px;
  		border: none;
  		background: #39F;
  		color: #FFF;
  		margin-top: 40px;
  	}
  	.msg{
  		margin-top: 40px;
  	}
  	.color-wrap{
  		display: flex;
  		 flex-wrap: wrap;
  	}
  	.color-div{
  		width: 30px;
  		height: 30px;
  		border: 5px solid #FFF;
  		margin:10px 20px;
  	}
  	.color-div-selected{
  		border-color: #999;
  	}
  </style>
</head>
<body>
<div>MT4-奥格瑞玛公会专用字体颜色转换</div>
<input id='content' type="" name="content" placeholder="输入发言内容">
<div class="color-wrap">
	<div class="color-div" style="background-color:#FF0000" data-color="FF0000"></div>
	<div class="color-div" style="background-color:#00FF00" data-color="00FF00"></div>
	<div class="color-div" style="background-color:#0000FF" data-color="0000FF"></div>
	<div class="color-div" style="background-color:#FFFF00" data-color="FFFF00"></div>
	<div class="color-div" style="background-color:#00FFFF" data-color="00FFFF"></div>
	<div class="color-div" style="background-color:#FF00FF" data-color="FF00FF"></div>
	<div class="color-div" style="background-color:#F0F0F0" data-color="F0F0F0"></div>
	<div class="color-div" style="background-color:#0F0F0F" data-color="0F0F0F"></div>
</div>
<button class="btn" id="change">点击转换</button>
<div class="msg"></div>
<button class="btn" id="copy">点击复制</button>
<script type="text/javascript" src='http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js'></script>
<script type="text/javascript">
	var selectColor = '';
	$('.color-div').click(function(){
		if(selectColor == $(this).attr("data-color")){
			selectColor = '';
			$('.color-div').removeClass("color-div-selected");
			return;
		}
		selectColor = $(this).attr("data-color");
		$('.color-div').removeClass("color-div-selected");
		$(this).addClass("color-div-selected");
	});
	$("#change").click(function(){
		var val = $("#content").val();
		var arr = val.split("");
		var text = '';
		if(selectColor){
			text = "[" + selectColor + "] " + val;
		}else{
			for(var i = 0;i<arr.length;i++){
				var color = getRandomColor();
				text += color + arr[i];
			};
		};
		$(".msg").html(text);
	})
	$("#copy").click(function(){
		const input = document.createElement('input');
    	document.body.appendChild(input);
    	input.setAttribute('value', $('.msg').html());
    	input.select();
	    if (document.execCommand('copy')) {
	        document.execCommand('copy');
	        alert("复制成功！");
	    }else{
	    	alert("你的浏览器不支持自动复制！")
	    }
 		document.body.removeChild(input);
	});
	var getRandomColor = function(){
		var color = "";
		for(var i = 0;i<6;i++){
			var a = parseInt(Math.random()*15);
			if(a == 10) a = "A";
			if(a == 11) a = "B";
			if(a == 12) a = "C";
			if(a == 13) a = "D";
			if(a == 14) a = "E";
			if(a == 15) a = "E";
			color += a;
		};
		return "["+color+"] ";
	};
</script>
</body>
</html>
